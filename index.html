<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Etch-a-Sketch</title>

    <link href="styles/reset.css" rel="stylesheet">
    <link href="styles/style.css" rel="stylesheet">
  </head>
  <body>
  
    <script>

        function onHover(e) {
            this.classList.add("hover");
            // random color
            const randomColor = Math.floor(Math.random()*16777215).toString(16);
            this.style.backgroundColor = "#" + randomColor;
        }

        function configGrid(width, height) {
            squares = [];
            grid.style.gridTemplateRows = `repeat(${width}, 1fr)`;
            grid.style.gridTemplateColumns = `repeat(${height}, 1fr)`;
            for (let i = 0; i < width * height; i++) {
                const square = document.createElement("div");
                square.classList.add("square");
                squares.push(square);
                grid.appendChild(square);
            }
            squares.forEach(square => {
                square.addEventListener('mouseover', onHover);
            });
        }

        function makeNewGrid(e) {
            console.log(e);
            let width = prompt("Enter number of desired squares for the width:");
            let height= prompt("Enter number of desired squares for the height:");
            while(grid.hasChildNodes()) {
                grid.removeChild(grid.firstChild);
            }
            configGrid(width, height);
        }

        const body = document.querySelector("body");
        const grid = document.createElement("div");
        grid.classList.add("grid");

        let squares;
        configGrid(16, 16);
        body.appendChild(grid);

        squares.forEach(square => {
            square.addEventListener('mouseover', onHover);
        });

        const button = document.createElement("button");
        button.textContent = "New Grid";
        body.insertBefore(button, grid);

        button.addEventListener("click", makeNewGrid);

    </script>
  </body>
</html>